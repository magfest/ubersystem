<script>
  function attendeeSearch({placeholder, attendeeList, maxDisplay=100}) {
    return {
      placeholder: placeholder,
      search: null,
      selectedAttendee: null,
      get selected_display(){
        if(!this.selectedAttendee){
            return this.placeholder;
        }
        return this.selectedAttendee.name;
      },
      get display_attendees() {
        let inputValue = this.search;
        if (inputValue && inputValue.trim().length >= 3) {
            inputValue = inputValue.trim().toLowerCase();
            return attendeeList.filter((attendee) => {
                let searchable = attendee.name + " " + attendee.badge;
                return searchable.toLowerCase().includes(inputValue);
            })
        } else {
           return attendeeList.slice(0,maxDisplay);
        }
      }
    }
  }
</script>
