{% import 'macros.html' as macros with context %}
{% import 'forms/macros.html' as form_macros with context %}
{% set attraction_feature_info = attraction_feature_info or forms['attraction_feature_info'] %}

{# BLOCK NAMES in this form:
    x_data
    location_category
    name_description
    time_duration

  Use these to add or rearrange fields. Remember to use {{ super() }} to print the original fields as-is.
#}

<div x-data="{ {% block x_data %}
signups_open_type: '{{ attraction_feature_info.signups_open_type.data }}',
waitlist_available: {{ attraction_feature_info.waitlist_available.data|boolean|tojson }},
{% endblock %} }">

<div class="row g-3 mb-3">
{% block name_desc_slots %}
<div class="col-sm">{{ form_macros.input(attraction_feature_info.name) }}</div>
<div class="col-sm">{{ form_macros.input(attraction_feature_info.description) }}</div>
<div class="col-sm">{{ form_macros.input(attraction_feature_info.slots) }}</div>
{% endblock %}
</div>

<div class="row g-3 mb-3">
{% block public_badge_num %}
<div class="col-sm">{{ form_macros.input(attraction_feature_info.is_public) }}</div>
<div class="col-sm">{{ form_macros.input(attraction_feature_info.badge_num_required) }}</div>
{% endblock %}
</div>

<div class="card card-body bg-light mb-3">
<span class="form-text mb-3">
    Synced Settings <a href="#" data-bs-toggle="tooltip" title="These settings are controlled by the {{ attraction.name }} attraction and apply to all new events in this feature. Updating one of these settings will update existing events UNLESS that setting has been overridden on the event."><i class="fa fa-question-circle" aria-hidden="true"></i> What's this?</a>
</span>
<div class="row g-3 mb-3">
{% block defaults %}
    <div class="col-sm">{{ form_macros.input(attraction_feature_info.populate_schedule) }}</div>
    <div class="col-sm">{{ form_macros.input(attraction_feature_info.no_notifications) }}</div>
</div><div class="row g-3 mb-3">
    <div class="col-sm">
        {{ form_macros.input(attraction_feature_info.waitlist_available, alpine_model="waitlist_available") }}
        <div x-show="waitlist_available">{{ form_macros.input(attraction_feature_info.waitlist_slots, required_if="waitlist_available") }}</div>
    </div>
    <div class="col-sm">
        {% call form_macros.input(attraction_feature_info.signups_open_type, alpine_model="signups_open_type") %}
        <div x-show="signups_open_type == 'relative'">
            {{ form_macros.input(attraction_feature_info.signups_open_relative, required_if="signups_open_type == 'relative'") }}
        </div>
        <div x-show="signups_open_type == 'absolute'">
            {{ form_macros.input(attraction_feature_info.signups_open_time, min_date=feature.minimum_signups_open, required_if="signups_open_type == 'absolute'") }}
        </div>
        {% endcall %}
        <div class="form-text">
            Updating the signup time settings will update ALL events in this feature unless their signup type or time has been changed from the default.
        </div>
    </div>
{% endblock %}
</div>
</div>

</div>