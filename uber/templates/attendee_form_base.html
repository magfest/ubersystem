{% extends "base.html" %}{% set admin_area=True %}
{% import "fields/attendee.html" as attendee_fields with context %}
{% block title %}Attendee Form - {{ attendee.full_name }}{% endblock %}
{% block content %}
{% include "attendee_nav_menu.html" %}

<div class="panel panel-default">
<div class="panel-body">
<form method="post" action="attendee_form" class="form-horizontal">
{{ csrf_token() }}
<input type="hidden" name="id" value="{{ attendee.db_id }}" />
<input type="hidden" name="return_to" value="{{ return_to }}" />

{% block form_fields %}
{% endblock %}

{% block save_button %}
{% set save_text = save_text or 'Create' if attendee.is_new else 'Save' %}
<div class="form-group">
    <div class="col-sm-9 col-sm-offset-3">
        <button type="submit" name="save" class="btn btn-primary" value="save_return_to_search">{{ save_text }} + Return to {{ return_to|title }}</button>
        <button type="submit" name="save" class="btn btn-primary" value="save">{{ save_text }}</button>
    </div>
</div>
{% endblock %}

</form>

{% block delete_button %}
{% if not attendee.is_new %}
    <div style="margin-left:25%">
        <form method="post" action="delete_attendee" onSubmit="return confirm('{% if attendee.group and attendee.is_unassigned %}Are you sure you want to delete this unassigned badge?{% elif attendee.group %}Are you sure you want to unassign this badge?{% else %}Are you sure you want to delete this attendee?{% endif %}');">
            {{ csrf_token() }}
            <input type="hidden" name="id" value="{{ attendee.id }}" />
            {% if return_to %}<input type="hidden" name="return_to" value="{{ return_to }}" />{% endif %}
            <br/><input type="submit" class="btn btn-danger" value="{% if attendee.group and attendee.is_unassigned %}Delete this group badge{% elif attendee.group %}Unassign this group badge{% else %}Delete Attendee{% endif %}"
                        {% if attendee.paid == c.HAS_PAID %} style="background-color:#BCBCBC" title="Cannot delete a paid badge." disabled {% endif %}/>
        </form>
    </div>
{% endif %}
{% endblock %}

</div>
</div>

{% endblock %}
